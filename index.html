<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RCN 30-Day OT Reading Plan with Psalms</title>
    <style>
        :root {
            --rcn-blue: #003366;
            --rcn-secondary: #000080;
            --rcn-red: #AA0000;
            --rcn-horseblood: #7D0A0A;
            --rcn-light: #F5F5F5;
            --psalms-color: #4a6baf;
        }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--rcn-light);
            color: #333;
            margin: 0;
            padding: 0;
            line-height: 1.6;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 10px;
        }
        header {
            background-color: white;
            color: var(--rcn-blue);
            padding: 20px 0;
            text-align: center;
            border-bottom: 5px solid var(--rcn-horseblood);
            margin-bottom: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .header-text {
            display: flex;
            flex-direction: column;
        }
        h1 {
            margin: 0;
            font-size: 28px;
            color: var(--rcn-horseblood);
            font-weight: 700;
            letter-spacing: 1px;
            text-transform: uppercase;
        }
        .subtitle {
            font-size: 18px;
            margin-top: 8px;
            color: var(--rcn-blue);
            font-style: italic;
            letter-spacing: 0.5px;
        }
        .day-card {
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            margin-bottom: 20px;
            overflow: hidden;
            border-left: 4px solid var(--rcn-horseblood);
        }
        .day-header {
            background-color: var(--rcn-blue);
            color: white;
            padding: 12px 15px;
            font-weight: bold;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: all 0.3s ease;
        }
        .day-header:hover {
            background-color: var(--rcn-horseblood);
        }
        .day-header.completed {
            background-color: #2d572c;
        }
        .day-header::after {
            content: "▼";
            font-size: 14px;
            color: white;
        }
        .day-header.collapsed::after {
            content: "▲";
        }
        .day-content {
            padding: 15px;
            display: none;
        }
        .day-content.expanded {
            display: block;
        }
        .reading-buttons {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-bottom: 15px;
        }
        .chapter-btn {
            background-color: var(--rcn-blue);
            color: white;
            border: none;
            border-radius: 4px;
            padding: 8px 12px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s ease;
            min-width: 80px;
            text-align: center;
        }
        .psalms-btn {
            background-color: var(--psalms-color);
        }
        .chapter-btn.completed {
            background-color: var(--rcn-horseblood);
        }
        .psalms-btn.completed {
            background-color: #3a5285;
        }
        .chapter-btn:hover {
            background-color: var(--rcn-horseblood);
            transform: translateY(-2px);
        }
        .psalms-btn:hover {
            background-color: #3a5285;
            transform: translateY(-2px);
        }
        .book-title {
            color: var(--rcn-horseblood);
            font-weight: bold;
            margin-bottom: 10px;
            font-size: 16px;
            border-bottom: 1px solid #eee;
            padding-bottom: 5px;
        }
        .psalms-title {
            color: var(--psalms-color);
        }
        .progress-container {
            width: 100%;
            background-color: #e0e0e0;
            border-radius: 4px;
            margin: 15px 0;
            box-shadow: inset 0 1px 3px rgba(0,0,0,0.1);
        }
        .progress-bar {
            height: 10px;
            background: linear-gradient(to right, var(--rcn-blue), var(--rcn-horseblood));
            border-radius: 4px;
            width: 0%;
            transition: width 0.5s ease;
        }
        .completion-text {
            text-align: right;
            font-size: 14px;
            color: #555;
            margin-bottom: 20px;
        }
        .bible-screen {
            display: none;
            margin-top: 20px;
            padding: 0;
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        .bible-text {
            font-size: 16px;
            line-height: 1.8;
            max-height: 65vh;
            overflow-y: auto;
            padding: 20px;
            background-color: #f9f9f9;
        }
        .verse {
            margin-bottom: 12px;
            text-align: justify;
        }
        .verse-number {
            color: var(--rcn-horseblood);
            font-weight: bold;
            font-size: 0.8em;
            position: relative;
            top: -0.4em;
        }
        .psalms-verse-number {
            color: var(--psalms-color);
        }
        .back-btn {
            display: block;
            margin: 0;
            padding: 12px;
            background-color: var(--rcn-horseblood);
            color: white;
            border: none;
            width: 100%;
            cursor: pointer;
            font-size: 16px;
            text-align: center;
            transition: all 0.3s ease;
        }
        .back-btn:hover {
            background-color: var(--rcn-blue);
        }
        .reset-btn {
            display: block;
            margin: 15px 0 5px;
            padding: 8px 12px;
            background-color: var(--rcn-horseblood);
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            text-align: center;
            transition: all 0.3s ease;
        }
        .reset-btn:hover {
            background-color: var(--rcn-blue);
        }
        #chapter-title {
            font-weight: bold;
            margin: 0;
            padding: 15px;
            font-size: 1.3em;
            color: white;
            background-color: var(--rcn-horseblood);
            border-bottom: 1px solid var(--rcn-blue);
        }
        .psalms-chapter-title {
            background-color: var(--psalms-color);
        }
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255,255,255,.3);
            border-radius: 50%;
            border-top-color: white;
            animation: spin 1s ease-in-out infinite;
            margin-right: 10px;
        }
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        .optional-label {
            font-style: italic;
            color: #666;
            margin: 10px 0 5px;
        }
    </style>
</head>
<body>
    <header>
        <div class="header-text">
            <h1>Remnant Christian Network Benin</h1>
            <div class="subtitle">Striving for the Rebirth of Apostolic Christianity</div>
        </div>
    </header>
    
    <div class="container">
        <div class="progress-container">
            <div class="progress-bar" id="overall-progress"></div>
        </div>
        <div class="completion-text">
            <span id="completion-percentage">0%</span> Complete
        </div>
        
        <div id="reading-plan">
            <!-- Day 1 -->
            <div class="day-card">
                <div class="day-header" id="day-1-header" onclick="toggleDay(this)">Day 1 - Genesis 1-14</div>
                <div class="day-content">
                    <div class="book-title">Genesis (Creation & Patriarchs)</div>
                    <div class="reading-buttons">
                        <button class="chapter-btn" onclick="loadChapter('Genesis+1', 'KJV', this)">Genesis 1</button>
                        <button class="chapter-btn" onclick="loadChapter('Genesis+2', 'KJV', this)">Genesis 2</button>
                        <button class="chapter-btn" onclick="loadChapter('Genesis+3', 'KJV', this)">Genesis 3</button>
                        <button class="chapter-btn" onclick="loadChapter('Genesis+4', 'KJV', this)">Genesis 4</button>
                        <button class="chapter-btn" onclick="loadChapter('Genesis+5', 'KJV', this)">Genesis 5</button>
                        <button class="chapter-btn" onclick="loadChapter('Genesis+6', 'KJV', this)">Genesis 6</button>
                        <button class="chapter-btn" onclick="loadChapter('Genesis+7', 'KJV', this)">Genesis 7</button>
                        <button class="chapter-btn" onclick="loadChapter('Genesis+8', 'KJV', this)">Genesis 8</button>
                        <button class="chapter-btn" onclick="loadChapter('Genesis+9', 'KJV', this)">Genesis 9</button>
                        <button class="chapter-btn" onclick="loadChapter('Genesis+10', 'KJV', this)">Genesis 10</button>
                        <button class="chapter-btn" onclick="loadChapter('Genesis+11', 'KJV', this)">Genesis 11</button>
                        <button class="chapter-btn" onclick="loadChapter('Genesis+12', 'KJV', this)">Genesis 12</button>
                        <button class="chapter-btn" onclick="loadChapter('Genesis+13', 'KJV', this)">Genesis 13</button>
                        <button class="chapter-btn" onclick="loadChapter('Genesis+14', 'KJV', this)">Genesis 14</button>
                    </div>
                    
                    <div class="optional-label">Optional Psalms (5 daily):</div>
                    <div class="reading-buttons">
                        <button class="chapter-btn psalms-btn" onclick="loadChapter('Psalms+1', 'KJV', this)">Psalm 1</button>
                        <button class="chapter-btn psalms-btn" onclick="loadChapter('Psalms+2', 'KJV', this)">Psalm 2</button>
                        <button class="chapter-btn psalms-btn" onclick="loadChapter('Psalms+3', 'KJV', this)">Psalm 3</button>
                        <button class="chapter-btn psalms-btn" onclick="loadChapter('Psalms+4', 'KJV', this)">Psalm 4</button>
                        <button class="chapter-btn psalms-btn" onclick="loadChapter('Psalms+5', 'KJV', this)">Psalm 5</button>
                    </div>
                    
                    <button class="reset-btn" onclick="resetDay('day-1', [...Array.from({length: 14}, (_, i) => 'Genesis+' + (i+1)), ...Array.from({length: 5}, (_, i) => 'Psalms+' + (i+1))])">Reset Day 1</button>
                </div>
            </div>

            <!-- Day 2 -->
            <div class="day-card">
                <div class="day-header" id="day-2-header" onclick="toggleDay(this)">Day 2 - Genesis 15-28</div>
                <div class="day-content">
                    <div class="book-title">Genesis (Abraham to Jacob)</div>
                    <div class="reading-buttons">
                        <button class="chapter-btn" onclick="loadChapter('Genesis+15', 'KJV', this)">Genesis 15</button>
                        <button class="chapter-btn" onclick="loadChapter('Genesis+16', 'KJV', this)">Genesis 16</button>
                        <button class="chapter-btn" onclick="loadChapter('Genesis+17', 'KJV', this)">Genesis 17</button>
                        <button class="chapter-btn" onclick="loadChapter('Genesis+18', 'KJV', this)">Genesis 18</button>
                        <button class="chapter-btn" onclick="loadChapter('Genesis+19', 'KJV', this)">Genesis 19</button>
                        <button class="chapter-btn" onclick="loadChapter('Genesis+20', 'KJV', this)">Genesis 20</button>
                        <button class="chapter-btn" onclick="loadChapter('Genesis+21', 'KJV', this)">Genesis 21</button>
                        <button class="chapter-btn" onclick="loadChapter('Genesis+22', 'KJV', this)">Genesis 22</button>
                        <button class="chapter-btn" onclick="loadChapter('Genesis+23', 'KJV', this)">Genesis 23</button>
                        <button class="chapter-btn" onclick="loadChapter('Genesis+24', 'KJV', this)">Genesis 24</button>
                        <button class="chapter-btn" onclick="loadChapter('Genesis+25', 'KJV', this)">Genesis 25</button>
                        <button class="chapter-btn" onclick="loadChapter('Genesis+26', 'KJV', this)">Genesis 26</button>
                        <button class="chapter-btn" onclick="loadChapter('Genesis+27', 'KJV', this)">Genesis 27</button>
                        <button class="chapter-btn" onclick="loadChapter('Genesis+28', 'KJV', this)">Genesis 28</button>
                    </div>
                    
                    <div class="optional-label">Optional Psalms (5 daily):</div>
                    <div class="reading-buttons">
                        <button class="chapter-btn psalms-btn" onclick="loadChapter('Psalms+6', 'KJV', this)">Psalm 6</button>
                        <button class="chapter-btn psalms-btn" onclick="loadChapter('Psalms+7', 'KJV', this)">Psalm 7</button>
                        <button class="chapter-btn psalms-btn" onclick="loadChapter('Psalms+8', 'KJV', this)">Psalm 8</button>
                        <button class="chapter-btn psalms-btn" onclick="loadChapter('Psalms+9', 'KJV', this)">Psalm 9</button>
                        <button class="chapter-btn psalms-btn" onclick="loadChapter('Psalms+10', 'KJV', this)">Psalm 10</button>
                    </div>
                    
                    <button class="reset-btn" onclick="resetDay('day-2', [...Array.from({length: 14}, (_, i) => 'Genesis+' + (i+15)), ...Array.from({length: 5}, (_, i) => 'Psalms+' + (i+6))])">Reset Day 2</button>
                </div>
            </div>

            <!-- Placeholder for remaining days (3-30) -->
            <div class="days-placeholder" id="remaining-days-placeholder">
                <!-- Days 3-30 will be dynamically inserted here -->
            </div>
        </div>

        <!-- Bible Reading Screen -->
        <div class="bible-screen" id="bible-screen">
            <div id="chapter-title"></div>
            <div class="bible-text" id="bible-text"></div>
            <button class="back-btn" onclick="goBack()">Back to Reading Plan</button>
        </div>
    </div>

    <script>
        // Global variables
        const totalChapters = 30 * 14; // 30 days × 14 chapters/day (main reading)
        let readChapters = 0;
        
        // 30-day reading plan structure (14 chapters per day)
        const readingPlan = [
            // Day 1-2: Genesis
            { book: 'Genesis', start: 1, end: 14, day: 1 },
            { book: 'Genesis', start: 15, end: 28, day: 2 },
            { book: 'Genesis', start: 29, end: 42, day: 3 },
            { book: 'Genesis', start: 43, end: 50, nextBook: 'Exodus', nextStart: 1, nextEnd: 6, day: 4 },
            { book: 'Exodus', start: 7, end: 20, day: 5 },
            { book: 'Exodus', start: 21, end: 34, day: 6 },
            { book: 'Exodus', start: 35, end: 40, nextBook: 'Leviticus', nextStart: 1, nextEnd: 7, day: 7 },
            { book: 'Leviticus', start: 8, end: 21, day: 8 },
            { book: 'Leviticus', start: 22, end: 27, nextBook: 'Numbers', nextStart: 1, nextEnd: 5, day: 9 },
            { book: 'Numbers', start: 6, end: 19, day: 10 },
            { book: 'Numbers', start: 20, end: 33, day: 11 },
            { book: 'Numbers', start: 34, end: 36, nextBook: 'Deuteronomy', nextStart: 1, nextEnd: 10, day: 12 },
            { book: 'Deuteronomy', start: 11, end: 24, day: 13 },
            { book: 'Deuteronomy', start: 25, end: 34, nextBook: 'Joshua', nextStart: 1, nextEnd: 2, day: 14 },
            { book: 'Joshua', start: 3, end: 16, day: 15 },
            { book: 'Joshua', start: 17, end: 24, nextBook: 'Judges', nextStart: 1, nextEnd: 10, day: 16 },
            { book: 'Judges', start: 11, end: 21, nextBook: 'Ruth', nextStart: 1, nextEnd: 4, day: 17 },
            { book: '1 Samuel', start: 1, end: 14, day: 18 },
            { book: '1 Samuel', start: 15, end: 28, day: 19 },
            { book: '1 Samuel', start: 29, end: 31, nextBook: '2 Samuel', nextStart: 1, nextEnd: 12, day: 20 },
            { book: '2 Samuel', start: 13, end: 24, day: 21 },
            { book: '1 Kings', start: 1, end: 14, day: 22 },
            { book: '1 Kings', start: 15, end: 22, nextBook: '2 Kings', nextStart: 1, nextEnd: 8, day: 23 },
            { book: '2 Kings', start: 9, end: 22, day: 24 },
            { book: '2 Kings', start: 23, end: 25, nextBook: '1 Chronicles', nextStart: 1, nextEnd: 10, day: 25 },
            { book: '1 Chronicles', start: 11, end: 24, day: 26 },
            { book: '1 Chronicles', start: 25, end: 29, nextBook: '2 Chronicles', nextStart: 1, nextEnd: 8, day: 27 },
            { book: '2 Chronicles', start: 9, end: 22, day: 28 },
            { book: '2 Chronicles', start: 23, end: 36, day: 29 },
            { book: 'Ezra', start: 1, end: 10, nextBook: 'Nehemiah', nextStart: 1, nextEnd: 4, day: 30 }
        ];

        // Psalms reading plan (5 per day)
        const psalmsPlan = [];
        for (let day = 1; day <= 30; day++) {
            const startPsalm = (day - 1) * 5 + 1;
            psalmsPlan.push({
                day: day,
                start: startPsalm,
                end: startPsalm + 4
            });
        }

        // Toggle day collapse/expand
        function toggleDay(header) {
            const content = header.nextElementSibling;
            content.classList.toggle('expanded');
            header.classList.toggle('collapsed');
        }

        // Load chapter from Bible API with smooth loading animation
        async function loadChapter(passage, version, buttonElement) {
            const bibleText = document.getElementById('bible-text');
            const chapterTitle = document.getElementById('chapter-title');
            
            // Show loading state
            chapterTitle.innerHTML = `<span class="loading"></span>Loading ${passage.replace('+', ' ')}...`;
            bibleText.innerHTML = '';
            showBibleScreen();
            
            try {
                const apiUrl = `https://bible-api.com/${passage}?translation=${version}`;
                const response = await fetch(apiUrl);
                if (!response.ok) throw new Error('Network response was not ok');
                const data = await response.json();
                
                // Display chapter title with appropriate styling
                chapterTitle.textContent = data.reference;
                if (passage.startsWith('Psalms')) {
                    chapterTitle.classList.add('psalms-chapter-title');
                } else {
                    chapterTitle.classList.remove('psalms-chapter-title');
                }
                
                // Process and display text with appropriate verse styling
                if (data.verses && data.verses.length > 0) {
                    const isPsalms = passage.startsWith('Psalms');
                    bibleText.innerHTML = data.verses.map(verse => 
                        `<div class="verse">` +
                        `<span class="${isPsalms ? 'psalms-verse-number' : 'verse-number'}">${verse.verse}</span> ` +
                        `${verse.text}</div>`
                    ).join('');
                } else {
                    // Fallback for non-verse formatted translations
                    bibleText.innerHTML = data.text
                        .split('\n\n')
                        .map(para => `<div class="verse">${para}</div>`)
                        .join('');
                }
                
                // Mark as read with visual feedback
                markRead(passage, buttonElement);
                
                // Scroll to top of bible text
                bibleText.scrollTo(0, 0);
                
            } catch (error) {
                console.error('Error loading passage:', error);
                chapterTitle.textContent = `Error loading ${passage.replace('+', ' ')}`;
                bibleText.innerHTML = `<p>Please try again later or check your internet connection.</p>
                                      <p>Error: ${error.message}</p>`;
            }
        }

        // Show Bible screen with animation
        function showBibleScreen() {
            const plan = document.getElementById('reading-plan');
            const bibleScreen = document.getElementById('bible-screen');
            
            plan.style.opacity = '0';
            plan.style.transform = 'translateX(-20px)';
            setTimeout(() => {
                plan.style.display = 'none';
                bibleScreen.style.display = 'block';
                setTimeout(() => {
                    bibleScreen.style.opacity = '1';
                    bibleScreen.style.transform = 'translateX(0)';
                }, 50);
            }, 300);
        }

        // Go back to reading plan with animation
        function goBack() {
            const plan = document.getElementById('reading-plan');
            const bibleScreen = document.getElementById('bible-screen');
            
            bibleScreen.style.opacity = '0';
            bibleScreen.style.transform = 'translateX(20px)';
            setTimeout(() => {
                bibleScreen.style.display = 'none';
                plan.style.display = 'block';
                setTimeout(() => {
                    plan.style.opacity = '1';
                    plan.style.transform = 'translateX(0)';
                }, 50);
            }, 300);
        }

        // Reset day progress with confirmation
        function resetDay(dayId, chapters) {
            if (!confirm('Are you sure you want to reset this day\'s progress?')) return;
            
            let resetCount = 0;
            chapters.forEach(chapter => {
                if (localStorage.getItem(chapter)) {
                    localStorage.removeItem(chapter);
                    resetCount++;
                }
            });
            
            // Update read chapters count
            readChapters = Math.max(0, readChapters - resetCount);
            
            // Reset visual indicators
            const dayHeader = document.getElementById(dayId + '-header');
            const dayContent = dayHeader.nextElementSibling;
            
            dayHeader.classList.remove('completed');
            dayContent.querySelectorAll('.chapter-btn').forEach(btn => {
                btn.classList.remove('completed');
                btn.textContent = btn.textContent.replace(' ✓', '');
            });
            
            updateProgress();
            alert(`Reset ${resetCount} chapters for ${dayId.replace('-', ' ')}. Progress updated.`);
        }

        // Mark chapter as read with visual feedback
        function markRead(passage, buttonElement) {
            if (!localStorage.getItem(passage)) {
                localStorage.setItem(passage, 'read');
                
                // Visual feedback
                if (buttonElement) {
                    buttonElement.classList.add('completed');
                    if (!buttonElement.textContent.includes('✓')) {
                        buttonElement.textContent += ' ✓';
                    }
                    setTimeout(() => {
                        buttonElement.style.transform = 'scale(1.05)';
                        setTimeout(() => {
                            buttonElement.style.transform = 'scale(1)';
                        }, 200);
                    }, 100);
                }
                
                // Check day completion
                checkDayCompletion(passage);
                
                // Only count main reading chapters (not Psalms) for progress
                if (!passage.startsWith('Psalms')) {
                    readChapters++;
                }
                updateProgress();
            }
        }

        // Check if all chapters in a day are completed
        function checkDayCompletion(passage) {
            // Only check completion for main reading chapters (not Psalms)
            if (passage.startsWith('Psalms')) return;
            
            // Extract book and chapter number
            const [book, chapter] = passage.split('+');
            const chapterNum = parseInt(chapter);
            
            // Find which day this chapter belongs to
            let dayNum = 0;
            let cumulativeChapters = 0;
            
            for (const day of readingPlan) {
                if (day.book === book && chapterNum >= day.start && chapterNum <= day.end) {
                    dayNum = day.day;
                    break;
                }
                cumulativeChapters += (day.end - day.start + 1);
                if (day.nextBook) {
                    if (book === day.nextBook && chapterNum >= day.nextStart && chapterNum <= day.nextEnd) {
                        dayNum = day.day;
                        break;
                    }
                    cumulativeChapters += (day.nextEnd - day.nextStart + 1);
                }
            }
            
            if (dayNum === 0) return;
            
            const dayId = `day-${dayNum}`;
            const dayHeader = document.getElementById(dayId + '-header');
            if (!dayHeader) return;
            
            // Count completed chapters for this day's main reading
            const dayPlan = readingPlan.find(d => d.day === dayNum);
            let completedCount = 0;
            let totalChapters = 0;
            
            // Check main book chapters
            for (let i = dayPlan.start; i <= dayPlan.end; i++) {
                totalChapters++;
                if (localStorage.getItem(`${dayPlan.book}+${i}`)) {
                    completedCount++;
                }
            }
            
            // Check next book chapters if they exist
            if (dayPlan.nextBook) {
                for (let i = dayPlan.nextStart; i <= dayPlan.nextEnd; i++) {
                    totalChapters++;
                    if (localStorage.getItem(`${dayPlan.nextBook}+${i}`)) {
                        completedCount++;
                    }
                }
            }
            
            // Mark day as completed if all main chapters are read
            if (completedCount === totalChapters) {
                dayHeader.classList.add('completed');
            } else {
                dayHeader.classList.remove('completed');
            }
        }

        // Update progress bar with smooth animation
        function updateProgress() {
            const progressPercentage = Math.min(100, (readChapters / totalChapters) * 100);
            const progressBar = document.getElementById('overall-progress');
            const percentageText = document.getElementById('completion-percentage');
            
            // Animate progress bar
            progressBar.style.width = progressPercentage + '%';
            
            // Update percentage text with counting animation
            let currentPercent = parseInt(percentageText.textContent) || 0;
            const targetPercent = Math.round(progressPercentage);
            const increment = targetPercent > currentPercent ? 1 : -1;
            
            const animate = () => {
                if (currentPercent !== targetPercent) {
                    currentPercent += increment;
                    percentageText.textContent = currentPercent + '%';
                    setTimeout(animate, 20);
                }
            };
            animate();
        }

        // Generate the remaining days (3-30) dynamically
        function generateRemainingDays() {
            const placeholder = document.getElementById('remaining-days-placeholder');
            
            for (let dayNum = 3; dayNum <= 30; dayNum++) {
                const dayPlan = readingPlan.find(d => d.day === dayNum);
                if (!dayPlan) continue;
                
                // Calculate Psalms for this day
                const psalmsDay = psalmsPlan.find(d => d.day === dayNum);
                const psalmsButtons = [];
                for (let i = psalmsDay.start; i <= psalmsDay.end; i++) {
                    psalmsButtons.push(`<button class="chapter-btn psalms-btn" onclick="loadChapter('Psalms+${i}', 'KJV', this)">Psalm ${i}</button>`);
                }
                
                // Create main reading buttons
                let mainButtons = [];
                let resetChapters = [];
                
                // Main book chapters
                for (let i = dayPlan.start; i <= dayPlan.end; i++) {
                    mainButtons.push(`<button class="chapter-btn" onclick="loadChapter('${dayPlan.book}+${i}', 'KJV', this)">${dayPlan.book} ${i}</button>`);
                    resetChapters.push(`${dayPlan.book}+${i}`);
                }
                
                // Next book chapters if they exist
                if (dayPlan.nextBook) {
                    for (let i = dayPlan.nextStart; i <= dayPlan.nextEnd; i++) {
                        mainButtons.push(`<button class="chapter-btn" onclick="loadChapter('${dayPlan.nextBook}+${i}', 'KJV', this)">${dayPlan.nextBook} ${i}</button>`);
                        resetChapters.push(`${dayPlan.nextBook}+${i}`);
                    }
                }
                
                // Add Psalms to reset chapters
                for (let i = psalmsDay.start; i <= psalmsDay.end; i++) {
                    resetChapters.push(`Psalms+${i}`);
                }
                
                // Create day card HTML
                const dayCard = document.createElement('div');
                dayCard.className = 'day-card';
                dayCard.innerHTML = `
                    <div class="day-header" id="day-${dayNum}-header" onclick="toggleDay(this)">Day ${dayNum} - ${getDayTitle(dayPlan)}</div>
                    <div class="day-content">
                        <div class="book-title">${getBookTitle(dayPlan)}</div>
                        <div class="reading-buttons">
                            ${mainButtons.join('')}
                        </div>
                        
                        <div class="optional-label">Optional Psalms (5 daily):</div>
                        <div class="reading-buttons">
                            ${psalmsButtons.join('')}
                        </div>
                        
                        <button class="reset-btn" onclick="resetDay('day-${dayNum}', ${JSON.stringify(resetChapters)})">Reset Day ${dayNum}</button>
                    </div>
                `;
                
                placeholder.appendChild(dayCard);
            }
        }
        
        // Helper function to get day title
        function getDayTitle(dayPlan) {
            let title = `${dayPlan.book} ${dayPlan.start}-${dayPlan.end}`;
            if (dayPlan.nextBook) {
                title += `, ${dayPlan.nextBook} ${dayPlan.nextStart}-${dayPlan.nextEnd}`;
            }
            return title;
        }
        
        // Helper function to get book title/description
        function getBookTitle(dayPlan) {
            // This would contain the descriptive titles for each section
            // Simplified for this example
            if (dayPlan.book === 'Genesis') {
                if (dayPlan.start >= 29) return "Genesis (Jacob to Joseph)";
                if (dayPlan.start >= 15) return "Genesis (Abraham to Jacob)";
                return "Genesis (Creation & Patriarchs)";
            }
            if (dayPlan.book === 'Exodus') return "Exodus (Israel's Deliverance)";
            if (dayPlan.book === 'Leviticus') return "Leviticus (Priestly Laws)";
            if (dayPlan.book === 'Numbers') return "Numbers (Wilderness Journey)";
            if (dayPlan.book === 'Deuteronomy') return "Deuteronomy (Moses' Sermons)";
            if (dayPlan.book === 'Joshua') return "Joshua (Conquest of Canaan)";
            if (dayPlan.book === 'Judges') return "Judges (Cycle of Apostasy)";
            if (dayPlan.book === 'Ruth') return "Ruth (Loyalty and Redemption)";
            if (dayPlan.book === '1 Samuel') return "1 Samuel (Samuel & Saul)";
            if (dayPlan.book === '2 Samuel') return "2 Samuel (David's Reign)";
            if (dayPlan.book === '1 Kings') return "1 Kings (United & Divided Kingdom)";
            if (dayPlan.book === '2 Kings') return "2 Kings (Israel & Judah's Kings)";
            if (dayPlan.book === '1 Chronicles') return "1 Chronicles (David's Reign)";
            if (dayPlan.book === '2 Chronicles') return "2 Chronicles (Temple History)";
            if (dayPlan.book === 'Ezra') return "Ezra (Return from Exile)";
            if (dayPlan.book === 'Nehemiah') return "Nehemiah (Rebuilding Jerusalem)";
            return dayPlan.book;
        }

        // Initialize progress on page load
        function initializeProgress() {
            readChapters = 0;
            
            // Count all completed chapters in localStorage
            for (let dayNum = 1; dayNum <= 30; dayNum++) {
                const dayPlan = readingPlan.find(d => d.day === dayNum);
                if (!dayPlan) continue;
                
                // Check main book chapters
                for (let i = dayPlan.start; i <= dayPlan.end; i++) {
                    const chapter = `${dayPlan.book}+${i}`;
                    if (localStorage.getItem(chapter)) {
                        readChapters++;
                        updateButtonState(dayNum, chapter);
                    }
                }
                
                // Check next book chapters if they exist
                if (dayPlan.nextBook) {
                    for (let i = dayPlan.nextStart; i <= dayPlan.nextEnd; i++) {
                        const chapter = `${dayPlan.nextBook}+${i}`;
                        if (localStorage.getItem(chapter)) {
                            readChapters++;
                            updateButtonState(dayNum, chapter);
                        }
                    }
                }
                
                // Check day completion
                checkDayCompletion(`${dayPlan.book}+${dayPlan.start}`);
            }
            
            // Generate remaining days (3-30)
            generateRemainingDays();
            
            updateProgress();
            
            // Add animation to elements when page loads
            document.querySelectorAll('.day-card').forEach((card, index) => {
                card.style.animation = `fadeInUp 0.5s ease ${index * 0.1}s forwards`;
                card.style.opacity = '0';
                card.style.transform = 'translateY(20px)';
            });
        }
        
        // Update button state based on localStorage
        function updateButtonState(dayNum, chapter) {
            const dayContent = document.querySelector(`#day-${dayNum}-header + .day-content`);
            if (!dayContent) return;
            
            const buttons = dayContent.querySelectorAll('.chapter-btn');
            for (const btn of buttons) {
                if (btn.textContent.replace(' ✓', '') === chapter.replace('+', ' ')) {
                    btn.classList.add('completed');
                    if (!btn.textContent.includes('✓')) {
                        btn.textContent += ' ✓';
                    }
                }
            }
        }

        // Add CSS animation
        const style = document.createElement('style');
        style.textContent = `
            @keyframes fadeInUp {
                from { opacity: 0; transform: translateY(20px); }
                to { opacity: 1; transform: translateY(0); }
            }
        `;
        document.head.appendChild(style);

        window.onload = initializeProgress;
    </script>
</body>
</html>
